#include "bsp/platform_bus.h"


/* PRCM Base Address */
#define PRCM_BASE			0x44DF0000
#define	CM_WKUP				0x44DF2800
#define	CM_PER				0x44DF8800
#define CM_DPLL				0x44DF4200
#define CM_RTC				0x44DF8500
#define PRM_RSTCTRL			(PRCM_BASE + 0x4000)
#define PRM_RSTST			(PRM_RSTCTRL + 4)

#define PER_REG(ofs) (CM_PER + (ofs)) 
#define nIRQ(n) ((n) + 32)

/*
 * UARTn
 */
TEMPLATE_RESOURCE(ttyS0, "ti,am4372-uart", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x44e09000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(72)),
    TRN("stdout", DRVMGR_KT_INT, 921600) /* Console : baudrate*/
);
TEMPLATE_RESOURCE(ttyS1, "ti,am4372-uart", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x48022000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(73))
);
TEMPLATE_RESOURCE(ttyS2, "ti,am4372-uart", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x48024000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(74))
);
TEMPLATE_RESOURCE(ttyS3, "ti,am4372-uart", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x481a6000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(44))
);
TEMPLATE_RESOURCE(ttyS4, "ti,am4372-uart", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x481aa000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(46))
);

/*
 * GPIO
 */
TEMPLATE_RESOURCE(gpio0, "ti,am4372-gpio", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x44e07000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(96))
);
TEMPLATE_RESOURCE(gpio1, "ti,am4372-gpio", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x4804c000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(98))
);
TEMPLATE_RESOURCE(gpio2, "ti,am4372-gpio", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x481ac000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(32))
);
TEMPLATE_RESOURCE(gpio3, "ti,am4372-gpio", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x481ae000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(62))
);
TEMPLATE_RESOURCE(gpio4, "ti,am4372-gpio", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x48320000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(106))
);
TEMPLATE_RESOURCE(gpio5, "ti,am4372-gpio", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x48322000),
  	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(148))
);

/*
 * User button
 */
TEMPLATE_RESOURCE(gpio_keys, "gpio-keys", DRVMGR_BUS_TYPE_GPIO, 4,
  	TRN("REG0", DRVMGR_KT_INT, 2),
	TRN("POLARITY", DRVMGR_KT_INT, 0),
	TRN("CODE", DRVMGR_KT_INT, 0x10)
);

/*
 * DMTimer
 */
TEMPLATE_RESOURCE(timer2, "ti,am4372-timer", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x48040000),
	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(68)),
	TRN("fck", DRVMGR_KT_INT, PER_REG(0x530))
);
TEMPLATE_RESOURCE(timer3, "ti,am4372-timer", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x48042000),
	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(69)),
	TRN("fck", DRVMGR_KT_INT, PER_REG(0x538))
);
TEMPLATE_RESOURCE(timer4, "ti,am4372-timer", DRVMGR_BUS_TYPE_PLATFORM, 0,
  	TRN("REG0", DRVMGR_KT_INT, 0x48044000),
	TRN("IRQ0", DRVMGR_KT_INT, nIRQ(92)),
	TRN("fck", DRVMGR_KT_INT, PER_REG(0x540))
);


TEMPLATE_RESOURCES_REGISTER(platform_resources,
    RN(ttyS0), RN(ttyS1), RN(ttyS2), RN(ttyS3), RN(ttyS4), 
	RN(gpio0), RN(gpio1), RN(gpio2), RN(gpio3), RN(gpio4), RN(gpio5),
	RN(gpio_keys),
	RN(timer2), RN(timer3), RN(timer4),
	NULL
);
